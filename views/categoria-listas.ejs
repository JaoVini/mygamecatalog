<!DOCTYPE html>
<html>
  <head>
    <title>Listagem de Categorias</title>
    <a href="http://localhost:3000/categorias"></a>
    <a href="/categorias/add" class="btn btn-success">Incluir</a>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <script>



          function exclui(IdCategoria){
        Swal.fire({
  title: "Excluir Categorias",
  text: "Você realmente deseja excluir essa categoria?",
  icon: "warning",
  showCancelButton: true,
  confirmButtonColor: "#3085d6",
  cancelButtonColor: "#d33",
  confirmButtonText: "Sim, desejo!"
}).then((result) => {
  if (result.isConfirmed) {
    $.ajax({
            url: "/categorias/delete/" + IdCategoria,
            type: "DELETE",
            success: function (res) {
             $(location).attr('href', '/categorias/listar');
            },
          });
            }
          })
      }

    </script>


    <style>
      
      body{background-color: #ccc;
      }

      h2{
        color: rgb(0, 0, 0);
        padding-bottom: 30px;
        text-align: center;
        font-family: Arial, Helvetica, sans-serif;
      }

  
    </style>
  </head>
  <body>
    <h2>Categorias Cadastradas</h2>


      <table class="table">
        <thead class="table-light">
          <th>#</th>
          <th>Categoria</th>
          <th>Ações</th>
        </thead> 
        <tbody class="tbody">
        <tr>
      <tbody>
  
        <p><% for (item of resultado)  {%>
          <tr>
            <td><%= item.IdCategoria%> </td>
            <td><%= item.Categoria%> </td>
            <td>
              <a href="/categorias/edit/<%= item.IdCategoria %>" class="btn btn-primary">Alterar</a>
              <button type="button" class="btn btn-danger" onclick="exclui(<%= item.IdCategoria %>)">Deletar</button>
            </td>
          </tr>
        <%}%>
  
      </tbody>
      </thead>
    </table>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    </p>
  </body>
</html>
